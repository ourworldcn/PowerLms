# 📋 PowerLms 待办任务清单

## 🟡 1. 功能开发（中优先级）

### 1.1 本公司信息维护功能
- [ ] **创建"本公司信息"功能模块** (2天) 🆕
  - **背景**：解决新建机构时无法选择"本位币"的"鸡生蛋、蛋生鸡"问题
  - **功能设计**：
    - 创建独立的机构信息编辑接口
    - 允许财务等特定角色编辑本机构详细信息
    - 支持字段：法人代表、营业执照号、开户行、财务设置、本位币等
    - 锁定字段："显示名称"、"全名"、"架构类型"（由超管设定，不可修改）
  - **接口设计**：
    - `GET /api/Organization/GetCurrentOrganizationInfo` - 获取当前机构信息
    - `PUT /api/Organization/UpdateCurrentOrganizationInfo` - 更新当前机构信息
  - **权限控制**：授权给财务等特定角色
  - **数据验证**：确保必填字段完整性
  - **负责人**：ZC@WorkGroup

### 1.2 权限缓存优化
- [ ] **权限缓存问题持续监控** (持续跟进)
  - 状态：后端基础代码已修改完毕
  - 后续：如果再出现权限不生效的问题，需要记录：
    - 问题现象
    - 发生时间
    - 闲置时长
  - 目的：判断是应用代码问题还是缓存问题
  - **负责人**：ZC@WorkGroup

---

## 📊 2. 测试与验证任务

### 2.1 偶发问题跟踪
- [ ] **新增账单合计金额显示问题**
  - 问题：新增账单时，底部合计金额有时显示，有时不显示
  - 状态：偶发问题，待石永昌复现并提供详细步骤
  - **负责人**：待确认（需前端排查）

### 2.2 审批流程验证
- [ ] **申请单编辑状态全面测试**
  - 状态：后端已修复，涉及多种状态判断（如已提交后不能编辑）
  - 需要：进行全面测试验证各种状态下的编辑权限
  - **负责人**：石永昌（测试）

---

## 🔧 3. 开发规范检查清单

### 新功能开发必检项
- [ ] 文件操作 → OwFileService
- [ ] 审批流程 → OwWfManager
- [ ] 权限控制 → AuthorizationManager
- [ ] 组织管理 → OrgManager
- [ ] 系统配置 → DataDicManager
- [ ] 消息通知 → OwMessageManager
- [ ] Excel处理 → OwDataUnit + OwNpoiUnit
- [ ] 分次收付 → ActualFinancialTransaction
- [ ] 缓存管理 → OwCacheExtensions
- [ ] 权限验证
- [ ] 多租户隔离
- [ ] 向后兼容
- [ ] 单元测试

---

## 📝 备注说明

### 优先级定义
- 🟡 **功能开发**：正常的功能开发和优化，按计划推进
- 📊 **测试验证**：需要测试验证的功能

### 任务状态标识
- [ ] 待处理
- 🔄 进行中
- ⏸️ 暂缓
- 🆕 新增需求

### 协作说明
- 后端负责人：ZC@WorkGroup
- 前端负责人：陈云霄
- 测试负责人：石永昌
- 产品经理：石永昌

### 更新日志
- 2025-02-06：从会议纪要(2024-07-26)中提取后端任务并整理
- 2025-02-06：清理已完成任务和非后端任务
- 2025-02-06：根据临时输出.md更新，仅保留明确的后端待办任务
