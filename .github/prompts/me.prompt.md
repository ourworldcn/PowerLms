# PowerLms 企业级开发提示词规范
*适用于 .NET 6 货运物流管理系统 - 严格执行版本*

## 编程语言与版本
- 使用.NET 6和 C# 10版本的语法和特性
- 利用最新语言特性如记录类型、顶级语句、全局using、模式匹配、类的新成员等
- 尽量不要使用 await/async 模式，除非涉及I/O密集操作
- 使用本地函数时，将所有本地函数放在末尾，用#region分组

## 代码搜索与参考
- 通过搜索现有代码库和相关文档提供准确输出
- 确保新代码与现有代码风格一致
- 参考项目已有模式和实践
- 优先复用现有组件，避免重复造轮子

## 语言使用偏好
- 参考英文技术资料和文档
- 用中文回答问题和提供说明
- 专业术语可保留英文原文
- 业务术语使用行业标准用词

## 代码风格要求
- 引用类名或者类的成员时，如果在标准注释里应该使用类似 <paramref name="dbContext"/> 的标准引用
- 函数体内部的注释尽量放在行尾，减少不必要的换行
- 应有详细注释，特别是业务逻辑和性能关键点
- 函数内尽量不要有空行
- 类内成员使用#region分组组织代码
- 保持代码简洁清晰，单个方法不超过50行
- 使用有意义的变量和方法命名
- 代码文件开头应有头部注释，代码文件中注释不要使用类似🚀的符号，其他类型文件如.md文档中推荐使用它们

## PowerLms基础设施组件强制复用
**每次开发新功能前必须检查的基础设施组件：**
- **文件操作** → 必须使用 <paramref name="OwFileService"/>
- **审批流程** → 必须使用 <paramref name="OwWfManager"/>  
- **权限控制** → 必须使用 <paramref name="AuthorizationManager"/>
- **Excel处理** → 必须使用 OwDataUnit + OwNpoiUnit（禁用废弃的NpoiManager）
- **组织管理** → 必须使用 <paramref name="OrgManager"/>
- **实体管理** → 必须使用 <paramref name="EntityManager"/>

## 企业级开发最佳实践
- **数据库操作**：谨慎处理数据库迁移，避免破坏性变更
- **向后兼容**：新增字段考虑默认值，废弃字段使用[Obsolete]标记
- **权限控制**：重要操作必须验证用户权限，调用AuthorizationManager.Demand()，如果有需要
- **错误处理**：统一的错误处理和日志记录机制
- **性能考虑**：批量操作使用内存优化和分批处理
- **安全性**：敏感数据处理和访问控制
- **多租户隔离**：数据查询必须包含OrgId过滤，如果有需要

## 通用最佳实践
- 遵循SOLID设计原则
- 正确处理异常和错误情况
- 考虑性能和安全性因素
- 编写易于测试和维护的代码
- 使用依赖注入和配置管理
- 实现适当的日志记录和监控

## 代码质量要求
- 使用一致的命名约定
- 适当的方法和类的职责分离
- 减少代码重复，提高复用性
- 考虑代码的可扩展性和可维护性
- 为复杂逻辑提供充分的注释说明

## 修改和重构指导
- 修改前评估影响范围
- 制定回滚计划
- 必须进行完整的测试验证
- 重要变更需要业务专家参与评估

## 头部注释模板
所有代码文件必须使用以下格式的头部注释：
```csharp
/*
 * [所在项目的中文名]
 * [功能模块名] - [具体功能描述]
 * 
 * 功能说明：
 * - [主要功能1]
 * - [主要功能2]
 * 
 * 技术特点：
 * - [技术特色1]
 * - [技术特色2]
 * 
 * 作者：[用户名]
 * 创建时间：[该文件的创建年月]
 * 最后修改：[修改日期] - [修改内容]
 */
```

## 执行检查清单
**每次开发任务必须确认：**
- [ ] 使用text_search搜索了相关代码
- [ ] 检查了现有基础设施组件的复用可能性
- [ ] 遵循了的代码风格规范
- [ ] 添加了标准的头部注释
- [ ] 实现了必要的权限验证，如果有需要
- [ ] 考虑了多租户数据隔离，如果有需要
- [ ] 编写了详细的业务逻辑注释
- [ ] 评估了修改的影响范围
- [ ] 使用了使用.NET 6和 C# 10版本的语法和特性简化代码

---
*适用于 .NET 6 企业级项目开发的通用提示词*