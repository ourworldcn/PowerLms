# 会议纪要

**会议时间：** [根据转录内容确定的时间]  
**参会人员：** chong z（老张）、永昌石（老师）、云霄陈（营销）  
**会议主题：** OA费用申请单系统开发与财务接口实现  

---

## 一、技术基础设施讨论

### 1.1 文件共享权限问题
**问题描述：**
- 遇到组织策略限制，无法正常共享文件
- 个人账户与商务账户绑定导致权限冲突

**解决方案：**
- 建议统一迁移到组织账户或保持个人账户独立使用
- 采用OneDrive在线编辑方式进行协作
- 通过共享链接方式进行文档协作

### 1.2 账户管理建议
**现状分析：**
- 存在个人账户与商务账户混合使用情况
- 组织策略对外部共享有限制

**优化建议：**
- 明确账户使用策略，避免权限冲突
- 规划长期的协作方式和文档管理流程

---

## 二、OA费用申请单流程优化

### 2.1 流程增强功能
**新增字段：**
- 开户行信息中增加"凭证字"字段
- OA权限模块新增4个权限节点（待部署）

**流程改进：**
- 增加"代申请"功能：登记人可代他人申请，但审批流程按申请人执行
- 申请人与登记人分离，提高流程灵活性

### 2.2 结算与审核流程重构
**两步式处理机制：**

**第一步：结算功能**
- 出纳负责资金支付
- 确定费用科目分类（办公费、差旅费等）
- 记录结算时间和支付方式（现金/银行转账）
- 支持单笔申请拆分为多笔结算

**第二步：确认功能**  
- 会计负责核对验证
- 基于银行流水进行确认
- 确保支付金额和对象正确
- 完成后可导入财务软件

### 2.3 权限控制优化
**安全机制：**
- 代申请功能不会造成权限升级
- 审批人可清楚识别申请人与登记人差异
- 保持原有审批流程的安全性

---

## 三、财务接口系统实现

### 3.1 接口架构设计
**已完成模块：**
- 发票导入接口 ✅
- 应收计提接口 ✅  
- 应付计提接口 ✅

**待开发模块：**
- OA申请单收款接口
- OA申请单付款接口

### 3.2 财务凭证生成规则

**数据来源映射：**
- 结算日期：来自明细结算日期
- 凭证号：系统自动生成，序号递增（1,2,3...）
- 币种汇率：取申请单主表数据
- 金额计算：明细金额 × 主表汇率

**一借一贷分录规则：**

**借方分录：**
- 科目代码：银行账号对应的科目代码（来自开户行配置）
- 摘要：明细填写的说明内容
- 金额：明细金额（原币种）
- 借方金额：明细金额 × 汇率（本位币）

**贷方分录：**
- 科目代码：费用种类对应的科目代码
- 摘要：与借方相同
- 贷方金额：明细金额 × 汇率（本位币）

### 3.3 核算维度设计
**员工核算：**
- 核算类别：填写"员工"
- 员工代码：使用财务编码（新增字段）
- 员工姓名：显示实际姓名

**部门核算：**
- 核算类别：填写"部门"  
- 部门代码：来自基础字典配置
- 部门名称：销售部、总办等

**条件控制：**
- 员工或部门字段为空时，对应核算字段也为空
- 支持灵活的核算维度组合

### 3.4 收款与付款分录差异
**收款分录：**
- 借方：银行账号科目
- 贷方：费用种类科目

**付款分录：**
- 借方：费用种类科目
- 贷方：银行账号科目

---

## 四、系统配置管理

### 4.1 基础数据完善
**费用种类配置：**
- 添加"其他费用种类"及对应科目代码
- 完善费用种类与财务科目的映射关系

**员工信息扩展：**
- 新增员工财务编码字段
- 解决财务系统人员唯一性识别问题

**部门字典管理：**
- 建立区域部门字典（简单字典）
- 配置部门代码和显示名称

### 4.2 流程配置扩展
**新增审批流程：**
- 其他费用收入申请流程
- 其他费用支出申请流程

**获取凭证号接口：**
- 提供凭证号自动获取功能
- 支持参数化凭证号生成规则

---

## 五、开发任务分工

### 5.1 后端开发任务
**OA模块增强：**
- [ ] 实现结算功能接口
- [ ] 实现确认功能接口  
- [ ] 增加申请单确认人和确认时间字段
- [ ] 完善代申请功能逻辑

**财务接口开发：**
- [ ] 开发OA收款财务接口
- [ ] 开发OA付款财务接口
- [ ] 实现凭证号自动获取接口
- [ ] 完善科目代码配置管理

**基础数据管理：**
- [ ] 添加员工财务编码字段
- [ ] 完善费用种类科目配置
- [ ] 建立部门字典管理
- [ ] 增加审批流程配置

### 5.2 前端开发任务
**用户界面优化：**
- [ ] 实现结算界面功能
- [ ] 实现确认界面功能
- [ ] 完善代申请功能界面
- [ ] 优化审批流程显示

**数据展示增强：**
- [ ] 完善申请单状态显示
- [ ] 增加财务确认状态标识
- [ ] 优化费用明细展示
- [ ] 增强权限控制界面

### 5.3 系统集成任务
**配置管理：**
- [ ] 部署新增权限节点
- [ ] 配置审批流程模板
- [ ] 完善基础字典数据
- [ ] 调试财务接口连接

**测试验证：**
- [ ] 完整流程测试
- [ ] 财务数据准确性验证
- [ ] 权限控制测试
- [ ] 接口性能测试

---

## 六、技术实现要点

### 6.1 数据库设计
**新增字段：**
- 开户行表：凭证字字段
- 员工表：财务编码字段  
- OA申请单：确认人、确认时间字段
- 权限表：4个新权限节点

**表关系优化：**
- 完善费用种类与科目的关联
- 建立员工财务编码映射
- 优化部门字典结构

### 6.2 接口设计规范
**输入参数标准：**
- 结算日期、凭证月份、凭证号
- 科目代码、摘要、币种、汇率
- 核算类别、代码、名称
- 借方/贷方金额

**输出格式要求：**
- 标准的一借一贷格式
- 完整的核算维度信息
- 准确的金额计算
- 规范的数据格式

### 6.3 业务逻辑控制
**流程控制：**
- 审批完成 → 结算 → 确认 → 财务导入
- 支持单笔拆分多次结算
- 确认完成后才能导入财务

**权限控制：**
- 代申请权限验证
- 结算操作权限控制
- 确认操作权限控制
- 财务导入权限管理

---

## 七、下阶段工作安排

### 7.1 即将开展工作
**本周重点：**
- 完成OA申请单基础流程开发
- 实现结算和确认功能
- 完善财务接口基础框架

**下周计划：**
- 开发复杂的实收实付结算单功能
- 增加10个新字段的复杂联动逻辑
- 前端界面调整和优化

### 7.2 后续优化目标
**功能扩展：**
- 支持更复杂的收款付款场景
- 完善多维度核算功能
- 增强财务数据分析能力

**系统优化：**
- 提升接口性能
- 完善错误处理机制  
- 增强用户体验

---

## 八、会议决议

### 8.1 核心决定
1. ✅ **流程重构确认**：采用结算+确认的两步式处理机制
2. ✅ **技术方案通过**：财务接口采用一借一贷标准分录格式  
3. ✅ **分工明确**：按功能模块分配开发任务
4. ✅ **优先级确定**：优先完成OA申请单流程，后续开发实收实付功能

### 8.2 质量要求
- 确保财务数据准确性
- 保持系统向后兼容
- 严格控制权限安全
- 完善测试覆盖

### 8.3 沟通机制
- **定期会议**：每周进度同步
- **技术讨论**：复杂问题及时沟通
- **文档维护**：及时更新技术文档
- **问题跟踪**：建立问题清单

### 8.4 下次会议安排
- **主要议题**：实收实付结算单详细设计
- **准备工作**：完成基础功能开发
- **预期输出**：详细技术实现方案

---

**会议纪要整理时间：** [整理完成时间]  
**纪要分发范围：** 全体开发团队  
**跟进机制：** 每日进度汇报，周会总结规划