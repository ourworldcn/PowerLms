诺诺网 诺诺发票

**回传开票结果对接文档**

(版本1.0.8)

2022年5月

目录

[一、 回传开票结果接口 4](#回传开票结果接口)

[1. 接口描述 4](#接口描述)

[2. 请求地址 4](#请求地址)

[3. 请求方式 4](#请求方式)

[4. 请求参数 4](#请求参数)

[5. 请求示例 8](#_Toc1732087281_WPSOffice_Level2)

[6. 响应参数 8](#响应参数)

[7. 响应示例 8](#响应示例)

[8. 异常说明 8](#异常说明)

[二、 回传发票作废结果接口 9](#回传发票作废结果接口)

[1. 接口描述 9](#接口描述-1)

[2. 请求地址 9](#请求地址-1)

[3. 请求方式 9](#请求方式-1)

[4. 请求参数 9](#请求参数-1)

[5. 请求示例 10](#请求示例-1)

[6. 响应参数 10](#响应参数-1)

[7. 响应示例 10](#响应示例-1)

[8. 异常说明 11](#异常说明-1)

[三、开票申请结果数据回传 12](#三开票申请结果数据回传)

[1. 接口描述 12](#接口描述-2)

[2. 请求地址 12](#请求地址-2)

[3. 请求参数字段说明 12](#请求参数字段说明)

[4. 返回参数示例 12](#返回参数示例)

[5. 返回参数字段说明 13](#返回参数字段说明)

# 回传开票结果接口

## 接口描述

+-------------+--------------------------------------------------------+
| 回传开      |                                                        |
| 票结果接口  |                                                        |
+-------------+--------------------------------------------------------+
| 描述        | 1、开票完成，可根据                                    |
|             | 该接口定义的形式接收发票数据，内容包括（订单编号、开票 |
|             | 时间、发票代码、发票号码、价税合计、下载url地址等）。  |
|             |                                                        |
|             | 2、企业资质-开票失败是否回调 为"是" 时返回 发票状态    |
|             | 字段，并可以返回开票失败/签章失败的发票                |
|             |                                                        |
|             | 3、企业资质-开票失败是否回调 为"否" 时返回             |
|             | 不返回发票状态 字段，默认回传开票完成的发票            |
+-------------+--------------------------------------------------------+
| 版本号      | V1.0.1                                                 |
+-------------+--------------------------------------------------------+

## 请求地址

  ---------- ------------------------------------------------------------
  **环境**   **请求地址**

  生产环境   http://\[IP\]:\[PORT\]/invoice/scan

  沙箱坏境   http://\[IP\]:\[PORT\]/invoice/scan
  ---------- ------------------------------------------------------------

## 请求方式

  ----------------------------------- -----------------------------------
  请求方式                            同步 HTTP POST

  请求参数格式                        FORM

  请求数据编码                        UTF-8

  备注                                
  ----------------------------------- -----------------------------------

## 请求参数

+-------------+-------+-----+--------------------+--------------+----+
| **名称**    | **类  | *   | **示例值**         | **描述**     | ** |
|             | 型**  | *是 |                    |              | 最 |
|             |       | 否  |                    |              | 大 |
|             |       | **  |                    |              | ** |
|             |       |     |                    |              |    |
|             |       | *   |                    |              | ** |
|             |       | *必 |                    |              | 长 |
|             |       | 填  |                    |              | 度 |
|             |       | **  |                    |              | ** |
+-------------+-------+-----+--------------------+--------------+----+
| operater    | S     | Y   | callback           | 必填         |    |
|             | tring |     |                    | 参数。接口标 |    |
|             |       |     |                    | 识：callback |    |
+-------------+-------+-----+--------------------+--------------+----+
| orderno     | S     | Y   | 123456547983033    | 订单编号     | 64 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| content     | S     | Y   |                    | 开           |    |
|             | tring |     |                    | 票信息（json |    |
|             |       |     |                    | 字符串格式） |    |
+-------------+-------+-----+--------------------+--------------+----+
| cont        |       |     |                    |              |    |
| ent开票信息 |       |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_status    | S     | N   |                    | 发票状态（1  | 1  |
|             | tring |     |                    | ：开票完成、 |    |
|             |       |     |                    | 2：开票失败  |    |
|             |       |     |                    | 、3：开票成  |    |
|             |       |     |                    | 功签章失败（ |    |
|             |       |     |                    | 电票时））； |    |
|             |       |     |                    | 注：1、企    |    |
|             |       |     |                    | 业资质-开票  |    |
|             |       |     |                    | 失败是否回调 |    |
|             |       |     |                    | 为"是"       |    |
|             |       |     |                    | 时           |    |
|             |       |     |                    | 返回该字段； |    |
|             |       |     |                    | 2、（开票    |    |
|             |       |     |                    | 失败、开票成 |    |
|             |       |     |                    | 功签章失败时 |    |
|             |       |     |                    | ）           |    |
|             |       |     |                    | content中    |    |
|             |       |     |                    | 只返回：发票 |    |
|             |       |     |                    | 流水号、发票 |    |
|             |       |     |                    | 状态、销方税 |    |
|             |       |     |                    | 号、失败原因 |    |
|             |       |     |                    | 四个字段；   |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_kprq      | Date  | Y   | 1490867741000      | 开票日期     | 13 |
+-------------+-------+-----+--------------------+--------------+----+
| c_fpdm      | S     | N   | 033001600111       | 发票代       | 12 |
|             | tring |     |                    | 码（全电电票 |    |
|             |       |     |                    | 时为空，全电 |    |
|             |       |     |                    | 纸票时有值） |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_fphm      | S     | Y   | 17314161           | 发票号       | 20 |
|             | tring |     |                    | 码（全电电票 |    |
|             |       |     |                    | 时为空，全电 |    |
|             |       |     |                    | 纸票时有值） |    |
+-------------+-------+-----+--------------------+--------------+----+
| allE        | Sting | N   | 22                 | 全电发票     | 20 |
| lectronicIn |       |     | 312000000000183317 | 号码（全电发 |    |
| voiceNumber |       |     |                    | 票（电票+纸  |    |
|             |       |     |                    | 票）时有值） |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_yfpdm     | S     | N   | 033001600111       | 红           | 12 |
|             | tring |     |                    | 票对应的蓝票 |    |
|             |       |     |                    | 发票代码（蓝 |    |
|             |       |     |                    | 票为全电电票 |    |
|             |       |     |                    | 时为空，全电 |    |
|             |       |     |                    | 纸票时有值） |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_yfphm     | S     | N   | 17314161           | 红           | 20 |
|             | tring |     |                    | 票对应的蓝票 |    |
|             |       |     |                    | 发票号码（蓝 |    |
|             |       |     |                    | 票为全电电票 |    |
|             |       |     |                    | 时为空，全电 |    |
|             |       |     |                    | 纸票时有值） |    |
+-------------+-------+-----+--------------------+--------------+----+
| oldEleIn    | S     | N   | 22                 | 红票对       | 20 |
| voiceNumber | tring |     | 312000000000183316 | 应的蓝票的全 |    |
|             |       |     |                    | 电发票号码（ |    |
|             |       |     |                    | 蓝票为全电发 |    |
|             |       |     |                    | 票（电票+纸  |    |
|             |       |     |                    | 票）时返回） |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_hjse      | S     | Y   | 1194.87            | 价税         | 20 |
|             | tring |     |                    | 税额（保留小 |    |
|             |       |     |                    | 数点后2位）  |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_bhsje     | S     | Y   | 203.13             | 不含税       | 20 |
|             | tring |     |                    | 金额（保留小 |    |
|             |       |     |                    | 数点后2位）  |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_orderno   | S     | Y   | 18                 | 订单号       | 64 |
|             | tring |     | 081620564001000232 |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_fpqqlsh   | S     | Y   | 18                 | 发票流水号   | 20 |
|             | tring |     | 081620564001000232 |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_e         | S     | N   | 客户端不在线       | 失败原       | 1  |
| rrorMessage | tring |     |                    | 因（只有发票 | 28 |
|             |       |     |                    | 状态c_status |    |
|             |       |     |                    | 为 2 或 3    |    |
|             |       |     |                    | 时返回）     |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_url       | S     | Y   | ht                 | 发票pdf地址  | 2  |
|             | tring |     | tps://inv.jss.com. | （若同时返回 | 55 |
|             |       |     | cn/group1/M00/A6/4 | 了ofdUrl与p  |    |
|             |       |     | C/wKgHPll_IU-AVELf | dfUrl，则pdf |    |
|             |       |     | AACNq5bmzFM769.pdf | 文件不能做为 |    |
|             |       |     |                    | 原始凭证，请 |    |
|             |       |     |                    | 用ofd文件做  |    |
|             |       |     |                    | 为原始凭证） |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_jpg_url   | S     | Y   | nnfp.jss.com.      | 发票详情地址 | 2  |
|             | tring |     | cn/h6Oj0Dn?p=Kh4Nj |              | 55 |
+-------------+-------+-----+--------------------+--------------+----+
| email       | S     | Y   |                    | 购方邮箱     | 50 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| phone       | S     | Y   |                    | 购方手机     | 20 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| 以下字段    |       |     |                    |              |    |
| 需经诺诺配  |       |     |                    |              |    |
| 置才可返回  |       |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| taxnum      | S     | N   | 339901999999142    | 购方税号     | 20 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| buyername   | S     | N   | 诺诺网             | 购方名称     | 1  |
|             | tring |     |                    |              | 00 |
+-------------+-------+-----+--------------------+--------------+----+
| telephone   | S     | N   | 0987-939736        | 购方电话     | 20 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| address     | S     | N   | 杭州西湖           | 购方地址     | 1  |
|             | tring |     |                    |              | 00 |
+-------------+-------+-----+--------------------+--------------+----+
| bankAccount | S     | N   | 杭州农业银行       | 购方银行     | 1  |
|             | tring |     | 13766103980009876  | 开户行及账号 | 00 |
+-------------+-------+-----+--------------------+--------------+----+
| c_hjje      | S     | N   | 100.50             | 含税         | 16 |
|             | tring |     |                    | 金额（保留小 |    |
|             |       |     |                    | 数点后2位）  |    |
+-------------+-------+-----+--------------------+--------------+----+
| checkCode   | S     | N   | 70                 | 校验码       | 20 |
|             | tring |     | 598593833665063630 |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| qrCode      | S     | N   |                    | 二维码       | 30 |
|             | tring |     |                    |              | 00 |
+-------------+-------+-----+--------------------+--------------+----+
| machineCode | S     | N   | 661619924643       | 税控设备号   | 12 |
|             | tring |     |                    | （机器编号） |    |
+-------------+-------+-----+--------------------+--------------+----+
| cipherText  | S     | N   |                    | 发票密文     | 3  |
|             | tring |     |                    |              | 00 |
+-------------+-------+-----+--------------------+--------------+----+
| c_i         | S     | N   | p                  | 发票种类:    | 1  |
| nvoice_line | tring |     |                    |              |    |
|             |       |     |                    | p:普通       |    |
|             |       |     |                    | 发票(电子);  |    |
|             |       |     |                    |              |    |
|             |       |     |                    | c:普通       |    |
|             |       |     |                    | 发票(纸质);  |    |
|             |       |     |                    |              |    |
|             |       |     |                    | b:专用       |    |
|             |       |     |                    | 发票(电子);  |    |
|             |       |     |                    |              |    |
|             |       |     |                    | s:专用       |    |
|             |       |     |                    | 发票(纸质);  |    |
|             |       |     |                    |              |    |
|             |       |     |                    | e:收购       |    |
|             |       |     |                    | 发票(电子);  |    |
|             |       |     |                    |              |    |
|             |       |     |                    | f:收购       |    |
|             |       |     |                    | 发票(纸质);  |    |
|             |       |     |                    |              |    |
|             |       |     |                    | r:普通       |    |
|             |       |     |                    | 发票(卷式);  |    |
|             |       |     |                    |              |    |
|             |       |     |                    | j:机动车     |    |
|             |       |     |                    | 销售统一发票 |    |
|             |       |     |                    |              |    |
|             |       |     |                    | u:二手车销   |    |
|             |       |     |                    | 售统一发票;  |    |
|             |       |     |                    |              |    |
|             |       |     |                    | bs:电        |    |
|             |       |     |                    | 子发票(增值  |    |
|             |       |     |                    | 税专用发票), |    |
|             |       |     |                    |              |    |
|             |       |     |                    | pc:电子发    |    |
|             |       |     |                    | 票(普通发票) |    |
|             |       |     |                    |              |    |
|             |       |     |                    | es:全电纸    |    |
|             |       |     |                    | 质发票(增值  |    |
|             |       |     |                    | 税专用发票), |    |
|             |       |     |                    |              |    |
|             |       |     |                    | e            |    |
|             |       |     |                    | c:全电纸质发 |    |
|             |       |     |                    | 票(普通发票) |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_clerk     | S     | N   | 张三               | 开票员       | 20 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_payee     | S     | N   | 李四               | 收款人       | 20 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_checker   | S     | N   | 王五               | 复核人       | 20 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_s         | S     | N   | 杭州农业银行       | 销方银行账号 | 1  |
| alerAccount | tring |     | 13766103980009876  |              | 00 |
+-------------+-------+-----+--------------------+--------------+----+
| c           | S     | N   | 339901999999142    | 销方税号     | 20 |
| _saletaxnum | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_salerName | S     | N   | 诺诺网             | 销方名称     | 1  |
|             | tring |     |                    |              | 00 |
+-------------+-------+-----+--------------------+--------------+----+
| c_salerTel  | S     | N   | 0987-939736        | 销方电话     | 20 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_s         | S     | N   | 杭州西湖           | 销方地址     | 80 |
| alerAddress | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_remark    | S     | N   | 备注：123          | 备注         | 2  |
|             | tring |     |                    |              | 30 |
+-------------+-------+-----+--------------------+--------------+----+
| pro         | S     | N   | 0                  | 成品油标志:  | 1  |
| ductOilFlag | tring |     |                    |              |    |
|             |       |     |                    | 0:非成品油;  |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 1:成品油;    |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_qdbz      | S     | N   | 0                  | 清单标志：   | 1  |
|             | tring |     |                    |              |    |
|             |       |     |                    | 0：非清单；\ |    |
|             |       |     |                    | 1：清单；    |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_qdxmmc    | S     | N   |                    | 清单项目名称 | 90 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| exte        | S     | N   | 1                  | 分机号       | 5  |
| nsionNumber | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| ter         | S     | N   | 1                  | 终端号       | 4  |
| minalNumber | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_imgUrls   | S     | N   | http://in          | 发票jpg      | 25 |
|             | tring |     | vtest.nntest.cn/gr | 图片地址（清 | 5\ |
|             |       |     | oup1/M00/02/9D/wKj | 单票发票主信 | *1 |
|             |       |     | ScV7M1wSAEq-KAAF1i | 息与清单信息 | 73 |
|             |       |     | ZL8PRo688.jpg,http | 以","隔开）  |    |
|             |       |     | ://invtest.nntest. |              |    |
|             |       |     | cn/group1/M00/02/9 |              |    |
|             |       |     | D/wKjScV7M1wSALKxo |              |    |
|             |       |     | AAGucasP_HQ233.jpg |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_pa        | S     | N   |                    | 纸票pdf地    | 2  |
| per_pdf_url | tring |     |                    | 址（含底图） | 55 |
+-------------+-------+-----+--------------------+--------------+----+
| c_ofd_url   | S     | N   |                    | 发票ofd地址  | 2  |
|             | tring |     |                    |              | 55 |
+-------------+-------+-----+--------------------+--------------+----+
| c_deptId    | S     | N   |                    | 部门id       | 32 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_clerkId   | S     | N   |                    | 开票员id     | 32 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| vehicleFlag | S     | N   | 0                  | 机动         | 1  |
|             | tring |     |                    | 车专票标志:  |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 0:非机动车;  |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 1:机动车;    |    |
+-------------+-------+-----+--------------------+--------------+----+
| redReason   | S     | N   | 1                  | 冲红原       | 1  |
|             | tring |     |                    | 因：1:销货退 |    |
|             |       |     |                    | 回;2:开票有  |    |
|             |       |     |                    | 误;3:服务中  |    |
|             |       |     |                    | 止;4:发生销  |    |
|             |       |     |                    | 售折让(开具  |    |
|             |       |     |                    | 红票时且票种 |    |
|             |       |     |                    | 为p,c,e,f,r  |    |
|             |       |     |                    | 可能会返回\  |    |
|             |       |     |                    | --成品油发票 |    |
|             |       |     |                    | 均不会返回)  |    |
+-------------+-------+-----+--------------------+--------------+----+
| spe         | S     | N   | 0                  | 发票特定     | 2  |
| cificFactor | tring |     |                    | 要素：（后续 |    |
|             |       |     |                    | 枚举值会有扩 |    |
|             |       |     |                    | 展，回传其他 |    |
|             |       |     |                    | 信息时返回） |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 0-普通       |    |
|             |       |     |                    | 1-成品油发票 |    |
|             |       |     |                    | 3-建筑服务   |    |
|             |       |     |                    | 4-           |    |
|             |       |     |                    | 货物运输服务 |    |
|             |       |     |                    | 6-不动产     |    |
|             |       |     |                    | 经营租赁服务 |    |
|             |       |     |                    | 9-           |    |
|             |       |     |                    | 旅客运输服务 |    |
|             |       |     |                    | 31-建安发票  |    |
|             |       |     |                    | 32-房        |    |
|             |       |     |                    | 地产销售发票 |    |
|             |       |     |                    | 33-二手车    |    |
|             |       |     |                    | 发票反向开具 |    |
|             |       |     |                    | 34-电子烟    |    |
|             |       |     |                    | 35-矿产品    |    |
+-------------+-------+-----+--------------------+--------------+----+
| buyer       | S     | N   | 张三               | 购买方经办   | 16 |
| ManagerName | tring |     |                    | 人姓名（全电 |    |
|             |       |     |                    | 发票时返回） |    |
+-------------+-------+-----+--------------------+--------------+----+
| mana        | S     | N   | 201                | 经办人证     | 40 |
| gerCardType | tring |     |                    | 件类型（全电 |    |
|             |       |     |                    | 发票时返回） |    |
+-------------+-------+-----+--------------------+--------------+----+
| ma          | S     | N   | 330105200001011100 | 经办人身份证 | 20 |
| nagerCardNo | tring |     |                    | 件号码（全电 |    |
|             |       |     |                    | 发票时返回） |    |
+-------------+-------+-----+--------------------+--------------+----+
| additional  | S     | N   | 自定义模版         | 附加模       | 50 |
| ElementName | tring |     |                    | 版名称（全电 |    |
|             |       |     |                    | 发票时返回） |    |
+-------------+-------+-----+--------------------+--------------+----+
| additional  | List  | N   |                    | 附加要素信   |    |
| ElementList |       |     |                    | 息列表（全电 |    |
|             |       |     |                    | 电票时返回） |    |
+-------------+-------+-----+--------------------+--------------+----+
| additional  |       |     |                    |              |    |
| ElementList |       |     |                    |              |    |
| 对应的附加  |       |     |                    |              |    |
| 模版的内容  |       |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| elementName | S     | N   | 测试1              | 信           | 2  |
|             | tring |     |                    | 息名称（全电 | 00 |
|             |       |     |                    | 电票时返回） |    |
+-------------+-------+-----+--------------------+--------------+----+
| e           | S     | N   | text               | 信           | 2  |
| lementValue | tring |     |                    | 息类型（全电 | 00 |
|             |       |     |                    | 电票时返回） |    |
+-------------+-------+-----+--------------------+--------------+----+
| elementType | S     | N   | 文本内容           | 信息值（全电 | 2  |
|             | tring |     |                    | 电票时返回） | 00 |
+-------------+-------+-----+--------------------+--------------+----+
|             |       |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| vehicleInfo | List  | N   |                    | 机动车销售   | 1  |
|             |       |     |                    | 统一发票中机 |    |
|             |       |     |                    | 动车相关信息 |    |
|             |       |     |                    | （只有票种j  |    |
|             |       |     |                    | 机动         |    |
|             |       |     |                    | 车销售统一发 |    |
|             |       |     |                    | 票才会返回） |    |
+-------------+-------+-----+--------------------+--------------+----+
| i           | List  | N   |                    | 发票         |    |
| nvoiceItems |       |     |                    | 明细信息（非 |    |
|             |       |     |                    | 必须，根据企 |    |
|             |       |     |                    | 业资质配置） |    |
+-------------+-------+-----+--------------------+--------------+----+
| inv         |       |     |                    |              |    |
| oiceItems发 |       |     |                    |              |    |
| 票明细信息  |       |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| itemName    | S     | N   | 大米               | 商品名称     | 90 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| itemUnit    | S     | N   | 吨                 | 单位         | 22 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| itemPrice   | S     | N   | 0.01               | 单价         | 16 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| itemTaxRate | S     | N   | 0.0                | 税率         | 10 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| itemNum     | S     | N   | 1                  | 数量         | 16 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| it          | S     | N   | 0.01               | 金额（       | 16 |
| emSumAmount | tring |     |                    |              | .2 |
|             |       |     |                    | 根据含       |    |
|             |       |     |                    | 税标志决定是 |    |
|             |       |     |                    | 含税金额还是 |    |
|             |       |     |                    | 不含税金额） |    |
+-------------+-------+-----+--------------------+--------------+----+
| it          | S     | N   | 0.00               | 税额         | 16 |
| emTaxAmount | tring |     |                    |              | .2 |
+-------------+-------+-----+--------------------+--------------+----+
| itemSpec    | S     | N   | 0                  | 规格型号     | 40 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| itemCode    | S     | N   | 1                  | 商品编码     | 19 |
|             | tring |     | 010101020000000000 |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| i           | S     | N   |                    | 自行编码     | 20 |
| temSelfCode | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| i           | S     | N   | true               | 含税标识:    | 5  |
| sIncludeTax | tring |     |                    |              |    |
|             |       |     |                    | true:含税;   |    |
|             |       |     |                    |              |    |
|             |       |     |                    | f            |    |
|             |       |     |                    | alse:不含税; |    |
+-------------+-------+-----+--------------------+--------------+----+
| invoiceL    | S     | N   | 0                  | 发票行性质:  | 1  |
| ineProperty | tring |     |                    |              |    |
|             |       |     |                    | 0:正常行;    |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 1:折扣行;    |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 2:被扣行;    |    |
+-------------+-------+-----+--------------------+--------------+----+
| z           | S     | N   | 3                  | 零税率标识:  | 1  |
| eroRateFlag | tring |     |                    |              |    |
|             |       |     |                    | 空:非零税率; |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 1:免税;      |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 2:不征税;    |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 3            |    |
|             |       |     |                    | :普通零税率; |    |
|             |       |     |                    |              |    |
|             |       |     |                    | （全电       |    |
|             |       |     |                    | 发票时为空） |    |
+-------------+-------+-----+--------------------+--------------+----+
| favoure     | S     | N   |                    | 优惠政       | 50 |
| dPolicyName | tring |     |                    | 策名称（增值 |    |
|             |       |     |                    | 税特殊管理） |    |
|             |       |     |                    |              |    |
|             |       |     |                    | （全电       |    |
|             |       |     |                    | 发票时为空） |    |
+-------------+-------+-----+--------------------+--------------+----+
| favoure     | S     | N   | 0                  | 优           | 1  |
| dPolicyFlag | tring |     |                    | 惠政策标识:  |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 0:不使用;    |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 1:使用;      |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 全电时：     |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 01：简易征收 |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 02：稀土产品 |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 03：免税     |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 04：不征税   |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 05：先征后退 |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 06：         |    |
|             |       |     |                    | 100%先征后退 |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 07：         |    |
|             |       |     |                    | 50%先征后退  |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 08：         |    |
|             |       |     |                    | 按3%简易征收 |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 09：         |    |
|             |       |     |                    | 按5%简易征收 |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 10：         |    |
|             |       |     |                    | 按5%简易征收 |    |
|             |       |     |                    | 减按1.5%计征 |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 11：         |    |
|             |       |     |                    | 即征即退30%  |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 12：         |    |
|             |       |     |                    | 即征即退50%  |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 13：         |    |
|             |       |     |                    | 即征即退70%  |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 14：         |    |
|             |       |     |                    | 即征即退100% |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 15：超税     |    |
|             |       |     |                    | 负3%即征即退 |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 16：超税     |    |
|             |       |     |                    | 负8%即征即退 |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 17：超税负   |    |
|             |       |     |                    | 12%即征即退  |    |
|             |       |     |                    |              |    |
|             |       |     |                    | 18：超税     |    |
|             |       |     |                    | 负6%即征即退 |    |
+-------------+-------+-----+--------------------+--------------+----+
| deduction   | S     | N   |                    | 扣除额（保   | 24 |
|             | tring |     |                    | 留两位小数） |    |
+-------------+-------+-----+--------------------+--------------+----+
| vehicl      |       |     |                    |              |    |
| eInfo机动车 |       |     |                    |              |    |
| 销售统一发  |       |     |                    |              |    |
| 票相关信息  |       |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| vehicleType | S     | N   | 轿车               | 机动车类型   | 40 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| brandModel  | S     | N   | 宝马3系            | 厂牌型号     | 60 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| pr          | S     | N   | 北京               | 原产地       | 32 |
| oductOrigin | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| certificate | S     | N   | WDL042613263551    | 合格证号     | 50 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| i           | S     | N   |                    | 进           | 36 |
| mportCerNum | tring |     |                    | 出口证明书号 |    |
+-------------+-------+-----+--------------------+--------------+----+
| insOddNum   | S     | N   |                    | 商检单码     | 32 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| engineNum   | S     | N   |                    | 发动机号码   | 50 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| vehicleCode | S     | N   | LHGK43284342384234 | 车辆识别号   | 23 |
|             | tring |     |                    | 码/机动车号  |    |
|             |       |     |                    | 码（车架号） |    |
+-------------+-------+-----+--------------------+--------------+----+
| i           | S     | N   |                    | 完税证明号码 | 32 |
| ntactCerNum | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| tonnage     | S     | N   | 3                  | 吨位         | 8  |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| maxCapacity | S     | N   | 5                  | 限乘人数     | 12 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| ta          | S     | N   | 13399000           | 主管         | 11 |
| xOfficeCode | tring |     |                    | 税务机关代码 |    |
+-------------+-------+-----+--------------------+--------------+----+
| ta          | S     | N   | 杭州税务           | 主管         | 80 |
| xOfficeName | tring |     |                    | 税务机关名称 |    |
+-------------+-------+-----+--------------------+--------------+----+
| i           | S     | N   | 9114010034683511XD | 身份         | 20 |
| dNumOrgCode | tring |     |                    | 证号码或组织 |    |
|             |       |     |                    | 机构代码（20 |    |
|             |       |     |                    | 21新版机动车 |    |
|             |       |     |                    | 发票时为空） |    |
+-------------+-------+-----+--------------------+--------------+----+
| manuf       | S     | N   | 华晨宝             | 生产厂家     | 2  |
| acturerName | tring |     | 马汽车生产有限公司 |              | 00 |
+-------------+-------+-----+--------------------+--------------+----+
| second      |       |     |                    |              |    |
| HandCarInfo |       |     |                    |              |    |
| 二手车      |       |     |                    |              |    |
| 销售统一发  |       |     |                    |              |    |
| 票相关信息  |       |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| o           | S     | N   | 1                  | 开票方类型   | 1  |
| rganizeType | tring |     |                    | 1：经营单位  |    |
|             |       |     |                    | 2：拍卖单位  |    |
|             |       |     |                    | 3            |    |
|             |       |     |                    | ：二手车市场 |    |
+-------------+-------+-----+--------------------+--------------+----+
| vehicleType | S     | N   | 轿车               | 车辆类型,同  | 40 |
|             | tring |     |                    | 明细中商品名 |    |
|             |       |     |                    | 称，开具二手 |    |
|             |       |     |                    | 车发票时明细 |    |
|             |       |     |                    | 有且仅有一行 |    |
+-------------+-------+-----+--------------------+--------------+----+
| brandModel  | S     | N   | 宝马3系            | 厂牌型号     | 60 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| vehicleCode | S     | N   | LHGK43284342384234 | 车辆识别     | 23 |
|             | tring |     |                    | 号码/车架号  |    |
+-------------+-------+-----+--------------------+--------------+----+
| i           | S     | N   |                    | 完税证明号码 | 32 |
| ntactCerNum | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| li          | S     | N   | 浙A12345           | 车牌照号     | 20 |
| censeNumber | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| reg         | S     | N   | 330022123321       | 登记证号     | 20 |
| isterCertNo | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| vehicleMan  | S     | N   | 杭州               | 转入         | 80 |
| agementName | tring |     |                    | 地车管所名称 |    |
+-------------+-------+-----+--------------------+--------------+----+
| sellerName  | S     | N   | 张三               | 卖方单位     | 80 |
|             | tring |     |                    | /个人名称（  |    |
|             |       |     |                    | 开票方类型为 |    |
|             |       |     |                    | 1、2时，与销 |    |
|             |       |     |                    | 方名称一致） |    |
+-------------+-------+-----+--------------------+--------------+----+
| s           | S     | N   | 330100199001010000 | 卖           | 20 |
| ellerTaxnum | tring |     |                    | 方单位代码/  |    |
|             |       |     |                    | 身份证号码（ |    |
|             |       |     |                    | 开票方类型为 |    |
|             |       |     |                    | 1、2时，与销 |    |
|             |       |     |                    | 方税号一致） |    |
+-------------+-------+-----+--------------------+--------------+----+
| se          | S     | N   | 杭州文一路888号    | 卖方单位     | 80 |
| llerAddress | tring |     |                    | /个人地址（  |    |
|             |       |     |                    | 开票方类型为 |    |
|             |       |     |                    | 1、2时，与销 |    |
|             |       |     |                    | 方地址一致） |    |
+-------------+-------+-----+--------------------+--------------+----+
| sellerPhone | S     | N   | 13888888888        | 卖方单位     | 20 |
|             | tring |     |                    | /个人电话（  |    |
|             |       |     |                    | 开票方类型为 |    |
|             |       |     |                    | 1、2时，与销 |    |
|             |       |     |                    | 方电话一致） |    |
+-------------+-------+-----+--------------------+--------------+----+
| []          |       |     |                    |              |    |
| {#_Toc17320 |       |     |                    |              |    |
| 87281_WPSOf |       |     |                    |              |    |
| fice_Level2 |       |     |                    |              |    |
| .anchor}    |       |     |                    |              |    |
| 二手车      |       |     |                    |              |    |
| 销售统一发  |       |     |                    |              |    |
| 票相关信息  |       |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
|             |       |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
|             |       |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
|             |       |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
|             |       |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
|             |       |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
|             |       |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
|             |       |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
|             |       |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
|             |       |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
|             |       |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
|             |       |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+

## 请求示例

form形式键值对:

\"operater\":\"callback\"

\"content\":\"{\"c_bhsje\":\"34.18\",\"c_fpdm\":\"140110940000\",\"c_fphm\":\"10008058\",\"c_fpqqlsh\":\"17033017485201000001\",\"c_hjse\":\"5.81\",\"c_kprq\":\"1490867741000\",\"c_orderno\":\"No12xsaxx6\",\"c_url\":\"http://115.236.64.125/group1/M00/01/78/wKjScFjc2P2AVYf7AABml8lNe1M281.pdf\"}\"

\"orderno\":\"123456547983033\"

content内容为json串：

{

\"c_bhsje\":\"34.18\",

\"c_fpdm\":\"140110940000\",

\"c_fphm\":\"10008058\",

\"c_fpqqlsh\":\"17033017485201000001\",

\"c_hjse\":\"5.81\",

\"c_kprq\":\"1490867741000\",

\"c_orderno\":\"No12xsaxx6\",

\"c_url\":\"http://115.236.64.125/group1/M00/01/78/wKjScFjc2P2AVYf7AABml8lNe1M281.pdf\"

}

## 响应参数

  ------------------ ---------- --------------------------- ---------------
  **名称**           **类型**   **示例值**                  **描述**

  status             String     0000                        状态编号

  message            String     同步成功                    描述信息
  ------------------ ---------- --------------------------- ---------------

## 响应示例

{

\"status\":\"0000\",

\"message\":\"同步成功\"

}

## 异常说明

  ------------ --------------------- ----------------------------------------
  **异常码**   **异常描述**          **解决方案**

  9999         请求失败              检查接口地址是否正确

                                     

                                     
  ------------ --------------------- ----------------------------------------

# 回传发票作废结果接口

## 1. 接口描述

+-------------+--------------------------------------------------------+
| 回传发票作  |                                                        |
| 废结果接口  |                                                        |
+-------------+--------------------------------------------------------+
| 描述        | 1、企业资质-作废结果是否回调 为"是"                    |
|             | 时，当作废完成时返回 作废结果                          |
|             |                                                        |
|             | 2、发票作废请求完成，可根据该接口定义的形式接          |
|             | 收发票作废状态，内容包括（发票流水号、发票代码、号码、 |
|             | 作废时间、作废状态（成功/失败：失败返回失败原因））。  |
|             |                                                        |
|             | 3、支持A9+开票服务器类型的作废结果回调                 |
+-------------+--------------------------------------------------------+
| 版本号      | V1.0.0                                                 |
+-------------+--------------------------------------------------------+

## 2. 请求地址

  ---------- -----------------------------------------------------------------------
  **环境**   **请求地址**

  生产环境   http://\[IP\]:\[PORT\]/invoice/scan（后台配置与回传开票结果地址相同）

  沙箱坏境   http://\[IP\]:\[PORT\]/invoice/scan（后台配置与回传开票结果地址相同）
  ---------- -----------------------------------------------------------------------

## 3. 请求方式

  ----------------------------------- -----------------------------------
  请求方式                            同步 HTTP POST

  请求参数格式                        FORM

  请求数据编码                        UTF-8

  备注                                
  ----------------------------------- -----------------------------------

## 4. 请求参数

+-------------+-------+-----+--------------------+--------------+----+
| **名称**    | **类  | *   | **示例值**         | **描述**     | ** |
|             | 型**  | *是 |                    |              | 最 |
|             |       | 否  |                    |              | 大 |
|             |       | **  |                    |              | ** |
|             |       |     |                    |              |    |
|             |       | *   |                    |              | ** |
|             |       | *必 |                    |              | 长 |
|             |       | 填  |                    |              | 度 |
|             |       | **  |                    |              | ** |
+-------------+-------+-----+--------------------+--------------+----+
| operater    | S     | Y   | invoiceInvalid     | 必填参数。   |    |
|             | tring |     |                    | 接口标识：in |    |
|             |       |     |                    | voiceInvalid |    |
+-------------+-------+-----+--------------------+--------------+----+
| fpqqlsh     | S     | Y   | 123456547983033    | 发票流水号   | 64 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| content     | S     | Y   |                    | 开           |    |
|             | tring |     |                    | 票信息（json |    |
|             |       |     |                    | 字符串格式） |    |
+-------------+-------+-----+--------------------+--------------+----+
| cont        |       |     |                    |              |    |
| ent开票信息 |       |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_fpdm      | S     | Y   | 033001600111       | 发票代码     | 12 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| c_fphm      | S     | Y   | 17314161           | 发票号码     | 8  |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
|             | S     | N   |                    | 全电发       | 20 |
|             | tring |     |                    | 票号码（全电 |    |
|             |       |     |                    | 纸票时返回） |    |
+-------------+-------+-----+--------------------+--------------+----+
| c           | S     | N   | 339901999999142    | 销方税号     | 20 |
| _saletaxnum | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| invalidTime | S     | Y   | 1625475746         | 作废时间戳   | 14 |
|             | tring |     |                    |              |    |
+-------------+-------+-----+--------------------+--------------+----+
| in          | S     | Y   | 3                  | 作废状态     | 1  |
| validStatus | tring |     |                    | 0:未作废     |    |
|             |       |     |                    | 1:作废中     |    |
|             |       |     |                    | 2:作废失败   |    |
|             |       |     |                    | 3:作废成功   |    |
+-------------+-------+-----+--------------------+--------------+----+
| in          | S     | N   | 2                  | 作废原       | 1  |
| validReason | tring |     |                    | 因1:销货退回 |    |
|             |       |     |                    | ;2:开票有误  |    |
|             |       |     |                    | ;3:服务中止; |    |
|             |       |     |                    | 4:其他（全电 |    |
|             |       |     |                    | 纸票时返回） |    |
+-------------+-------+-----+--------------------+--------------+----+
| spe         | S     | N   |                    | 其           | 2  |
| cificReason | tring |     |                    | 他作废原因详 | 55 |
|             |       |     |                    | 情（作废原因 |    |
|             |       |     |                    | 为4且为全电  |    |
|             |       |     |                    | 纸票时返回） |    |
+-------------+-------+-----+--------------------+--------------+----+
| invalidE    | S     | N   | 未找到对应发票     | 失败原因     | 1  |
| rrorMessage | tring |     |                    | （作废状态为 | 28 |
|             |       |     |                    | 2:作废失败时 |    |
|             |       |     |                    | 才有值）     |    |
+-------------+-------+-----+--------------------+--------------+----+

## 5. 请求示例

form形式键值对:

\"operater\":\"invoiceInvalid\"

\"content\":\"{\"c_fpdm\":\"140110940000\",\"c_fphm\":\"10008058\",\"invalidTime\":\"1625475746\",\"invalidStatus\":\"3\"}\"

\"fpqqlsh\":\"123456547983033\"

content内容为json串：

{

\"c_fpdm\":\"140110940000\",

\"c_fphm\":\"10008058\",

\"invalidTime\":\"1625475746\",

\"invalidStatus\":\"3\"

}

## 6. 响应参数

  ------------------ ---------- --------------------------- ---------------
  **名称**           **类型**   **示例值**                  **描述**

  status             String     0000                        状态编号

  message            String     同步成功                    描述信息
  ------------------ ---------- --------------------------- ---------------

## 7. 响应示例

{

\"status\":\"0000\",

\"message\":\"同步成功\"

}

## 8. 异常说明

  ------------ --------------------- ----------------------------------------
  **异常码**   **异常描述**          **解决方案**

  9999         请求失败              检查接口地址是否正确

                                     

                                     
  ------------ --------------------- ----------------------------------------

# 三、开票申请结果数据回传

## 1. 接口描述

  ---------------------- -------------------------------------------------------------------------------
  开票申请结果数据回传   

  描述                   用于扫码开票，C端消费者发起开票请求申请后，返回开票申请结果：申请成功或者失败

  版本号                 V1.0.0
  ---------------------- -------------------------------------------------------------------------------

## 2. 请求地址

  ---------- -----------------------------------------------------------------------
  **环境**   **请求地址**

  生产环境   http://\[IP\]:\[PORT\]/invoice/scan（后台配置与回传开票结果地址相同）

  沙箱坏境   http://\[IP\]:\[PORT\]/invoice/scan（后台配置与回传开票结果地址相同）
  ---------- -----------------------------------------------------------------------

## 3. 请求参数字段说明

  ---------- ------------ ----------------------------------------------------------------------------
  序号       参数         说明

  1          operater     必填参数。接口标识invoiceApply

  2          orderno      必填参数。订单编号

  3          taxNo        非必填参数。企业税号（回调企业非必需）

  4          isSuccess    必填参数。开票申请是否成功标识

  5          invoiceId    非必填参数。发票流水号（开票需审核时，无；一笔订单拆分成多张票的时候，无）
  ---------- ------------ ----------------------------------------------------------------------------

请求示例：

{

\"operater\": \"invoiceApply\",

\"orderno\": \"订单号\",

\"taxNo\": \"企业税号\",

\"isSuccess\": true,

\"invoice\'I\'d\":\"发票流水号\"

}

## 4. 返回参数示例

成功：{\"status\":\"0000\",\"message\":\"同步成功\"}

失败：{\"status\":\"9999\",\"message\":\"异常信息\"}

## 5. 返回参数字段说明

  ---- ------------ -------------- ------------------- --------------------
       字段         注释           必填                长度

  1    status       状态码         是                  0000:成功9999:失败

  2    message      返回信息       是                  成功失败信息
  ---- ------------ -------------- ------------------- --------------------

# 四、回传红字信息表申请结果接口

## 1、接口描述

+-------------+--------------------------------------------------------+
| 回传红      |                                                        |
| 字信息表申  |                                                        |
| 请结果接口  |                                                        |
+-------------+--------------------------------------------------------+
| 描述        | 1、红字信息表申请成功后，可根据该接口定义的形          |
|             | 式接收红字信息表数据，内容包括（申请编号、信息表编号、 |
|             | 销方税号、信息表编号、信息表状态、信息表商品明细等）。 |
|             |                                                        |
|             | 2、申请红字信息表接口中 callBackUrl                    |
|             | 字段有值时才返回，与企业资质中的开票结果回调地址无关   |
+-------------+--------------------------------------------------------+
| 版本号      | V1.0.0                                                 |
+-------------+--------------------------------------------------------+

## 2、请求地址

  ---------- ------------------------------------------------------------
  **环境**   **请求地址**

  生产环境   http://\[IP\]:\[PORT\]/invoice/scan

  沙箱坏境   http://\[IP\]:\[PORT\]/invoice/scan
  ---------- ------------------------------------------------------------

## 3、请求方式

  ----------------------------------- -----------------------------------
  请求方式                            同步 HTTP POST

  请求参数格式                        JSON

  请求数据编码                        UTF-8

  备注                                
  ----------------------------------- -----------------------------------

## 4、请求参数

+--------------+------+-----+--------------------+--------------+----+
| **名称**     | **类 | *   | **示例值**         | **描述**     | ** |
|              | 型** | *是 |                    |              | 最 |
|              |      | 否  |                    |              | 大 |
|              |      | **  |                    |              | ** |
|              |      |     |                    |              |    |
|              |      | *   |                    |              | ** |
|              |      | *必 |                    |              | 长 |
|              |      | 填  |                    |              | 度 |
|              |      | **  |                    |              | ** |
+--------------+------+-----+--------------------+--------------+----+
| operater     | St   | Y   | invoiceRedCallback | 必           |    |
|              | ring |     |                    | 填参数。接口 |    |
|              |      |     |                    | 标识：invoic |    |
|              |      |     |                    | eRedCallback |    |
+--------------+------+-----+--------------------+--------------+----+
| billNo       | St   | Y   | 661565             | 24位申请     | 24 |
|              | ring |     | 671900190416131426 | 单号:12位金  |    |
|              |      |     |                    | 税盘编号+12  |    |
|              |      |     |                    | 位开票时间(Y |    |
|              |      |     |                    | YMMDDHHMMSS) |    |
+--------------+------+-----+--------------------+--------------+----+
| content      | St   | Y   |                    | 信息         |    |
|              | ring |     |                    | 表内容（Json |    |
|              |      |     |                    | 字符串格式） |    |
+--------------+------+-----+--------------------+--------------+----+
| **Content    |      |     |                    |              |    |
| 红字         |      |     |                    |              |    |
| 信息表信息** |      |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| billInfoNo   | St   | Y   | 1403011906000993   | 信息表编号   | 24 |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| billStatus   | St   | Y   | 1                  | 信息表状     | 1  |
|              | ring |     |                    | 态(0:申请中  |    |
|              |      |     |                    | 1:审核成功   |    |
|              |      |     |                    | 2:审核失败   |    |
|              |      |     |                    | 3:申请成功   |    |
|              |      |     |                    | 4:申请失败   |    |
|              |      |     |                    | 6:撤销中     |    |
|              |      |     |                    | 7:撤销失败   |    |
|              |      |     |                    | 8:已撤销)    |    |
+--------------+------+-----+--------------------+--------------+----+
| billMessage  | St   | Y   | \                  | \[信息表     |    |
|              | ring |     | [TZD0000\]审核通过 | 状态代码\]信 |    |
|              |      |     |                    | 息表状态描述 |    |
+--------------+------+-----+--------------------+--------------+----+
| billType     | St   | N   | 0                  | 信息表       | 1  |
|              | ring |     |                    | 类型(0:正常  |    |
|              |      |     |                    | 1:逾期       |    |
|              |      |     |                    | 2:           |    |
|              |      |     |                    | 机动车类专票 |    |
|              |      |     |                    | 信息表（涉及 |    |
|              |      |     |                    | 退货和开具错 |    |
|              |      |     |                    | 误等，合格证 |    |
|              |      |     |                    | 退回）3:机动 |    |
|              |      |     |                    | 车类专票信息 |    |
|              |      |     |                    | 表（仅涉及销 |    |
|              |      |     |                    | 售折让，合格 |    |
|              |      |     |                    | 证不退回）)  |    |
+--------------+------+-----+--------------------+--------------+----+
| or           | St   | N   | 5000181530         | 对应蓝票代码 | 12 |
| iInvoiceCode | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| oriI         | St   | N   | 73347544           | 对应蓝票号码 | 8  |
| nvoiceNumber | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| taxType      | St   | N   | 1                  | 税种类       | 1  |
|              | ring |     |                    | 别(0:营业税  |    |
|              |      |     |                    | 1:增值税)    |    |
+--------------+------+-----+--------------------+--------------+----+
| multTaxRate  | St   | N   | 0                  | 多税率标志(  | 1  |
|              | ring |     |                    | 0:一票一税率 |    |
|              |      |     |                    | 1            |    |
|              |      |     |                    | :一票多税率) |    |
+--------------+------+-----+--------------------+--------------+----+
| billTime     | St   | N   | 2020-03-26         | 填开日期     |    |
|              | ring |     | 18:44:08           |              |    |
+--------------+------+-----+--------------------+--------------+----+
| sellerTaxNo  | St   | N   | 150301199811285326 | 销方税号     | 20 |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| sellerName   | St   | N   | 测试税号326        | 销方名称     | 1  |
|              | ring |     |                    |              | 00 |
+--------------+------+-----+--------------------+--------------+----+
| buyerTaxNo   | St   | N   | 150301199811285326 | 购方税号     | 20 |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| buyerName    | St   | N   | 测试税号326        | 购方名称     | 1  |
|              | ring |     |                    |              | 00 |
+--------------+------+-----+--------------------+--------------+----+
| taxEx        | St   | N   | -0.94              | 合计         |    |
| cludedAmount | ring |     |                    | 金额(不含税) |    |
+--------------+------+-----+--------------------+--------------+----+
| taxAmount    | St   | N   | -0.06              | 合计税额     |    |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| applyRemark  | St   | N   | 0000000100         | 申请说       | 10 |
|              | ring |     |                    | 明（1100000  |    |
|              |      |     |                    | 000,购方申请 |    |
|              |      |     |                    | -已抵扣;101  |    |
|              |      |     |                    | 0000000,购方 |    |
|              |      |     |                    | 申请-未抵扣; |    |
|              |      |     |                    | 000000010    |    |
|              |      |     |                    | 0,销方申请） |    |
+--------------+------+-----+--------------------+--------------+----+
| pdfUrl       | St   | N   |                    | 申           | 2  |
|              | ring |     |                    | 请表pdf地址  | 55 |
+--------------+------+-----+--------------------+--------------+----+
| codeVersion  | St   | N   | 32                 | 商           |    |
|              | ring |     |                    | 品编码版本号 |    |
+--------------+------+-----+--------------------+--------------+----+
| bus          | St   | N   | 0000000000         | 营业税标志   | 10 |
| inessTaxCode | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| details      | List | N   |                    | 红字信息表   |    |
|              |      |     |                    | 明细信息列表 |    |
+--------------+------+-----+--------------------+--------------+----+
| **details    |      |     |                    |              |    |
| 红字信息表明 |      |     |                    |              |    |
| 细信息列表** |      |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| goodsName    | St   | N   | 苹果               | 商品名称     | 90 |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| unit         | St   | N   | 袋                 | 单位         | 22 |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| specType     | St   | N   | 规格型号           | 规格型号     | 40 |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| num          | St   | N   | -1                 | 数量         | 16 |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| taxE         | St   | N   | 0.94               | 单价(不含税) | 16 |
| xcludedPrice | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| taxEx        | St   | N   | -0.94              | 商品         |    |
| cludedAmount | ring |     |                    | 金额(不含税) |    |
+--------------+------+-----+--------------------+--------------+----+
| taxAmount    | St   | N   | -0.06              | 商品税额     |    |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| taxRate      | St   | N   | 0.06               | 税率，注：蓝 | 10 |
|              | ring |     |                    | 票发票为清单 |    |
|              |      |     |                    | 红票时值有可 |    |
|              |      |     |                    | 能会为null。 |    |
+--------------+------+-----+--------------------+--------------+----+
| goodsCode    | St   | N   | 4                  | 商品编码     | 19 |
|              | ring |     | 020000000000000000 |              |    |
+--------------+------+-----+--------------------+--------------+----+
| selfCode     | St   | N   |                    | 企业自编码   | 16 |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| favour       | St   | N   | 0                  | 优惠政策标识 | 1  |
| edPolicyFlag | ring |     |                    | (0:不使用    |    |
|              |      |     |                    | 1:使用)      |    |
+--------------+------+-----+--------------------+--------------+----+
| favour       | St   | N   |                    | 优惠         | 50 |
| edPolicyName | ring |     |                    | 政策内容:即  |    |
|              |      |     |                    | 征即退、免税 |    |
|              |      |     |                    | 、简易征收等 |    |
+--------------+------+-----+--------------------+--------------+----+
| zeroRateFlag | St   | N   |                    | 零税率标识   | 1  |
|              | ring |     |                    | (空:非零税率 |    |
|              |      |     |                    | 1:免税       |    |
|              |      |     |                    | 2:不征税     |    |
|              |      |     |                    | 3            |    |
|              |      |     |                    | :普通零税率) |    |
+--------------+------+-----+--------------------+--------------+----+
| goodsCodeAbb | St   | N   | 水果               | 商品编码简称 |    |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+

## 5、请求示例

{

\"operater\": \"invoiceRedCallback\",

\"billNo\": \"661234567890211111130527\",

\"content\": {

\"codeVersion\": \"32\",

\"buyerTaxNo\": \"339901999999539\",

\"taxExcludedAmount\": \"-0.88\",

\"billType\": \"0\",

\"billInfoNo\": \"5001012111111800\",

\"sellerName\": \"339901999999142\",

\"oriInvoiceNumber\": \"\",

\"buyerName\": \"移动测试盘\",

\"billMessage\": \"\[TZD0000\]审核通过\",

\"multTaxRate\": \"\",

\"billTime\": \"2021-11-11 13:07:43\",

\"sellerTaxNo\": \"339901999999142\",

\"pdfUrl\":
\"https://invtest.nntest.cn/fp/9N1-Xtdy9TkxYquLKDjjIMLxnyLA5GOrrJxNws6-nsZQ7gaphHCG329KiwNsxD82ExMcPtSDV02HMgjpfNme7A.pdf\",

\"oriInvoiceCode\": \"\",

\"applyRemark\": \"1100000000\",

\"billStatus\": \"1\",

\"details\": \[

{

\"specType\": \"\",

\"taxExcludedAmount\": -0.88,

\"favouredPolicyName\": \"\",

\"num\": -0.073746310000000000,

\"goodsCodeAbb\": \"软饮料\",

\"favouredPolicyFlag\": 0,

\"taxRate\": 0.130000000000000000,

\"unit\": \"\",

\"zeroRateFlag\": \"0\",

\"goodsCode\": \"1030307010000000000\",

\"taxExcludedPrice\": 12.000000000000000000,

\"taxAmount\": -0.12,

\"selfCode\": \"\",

\"goodsName\": \"可乐\"

}

\],

\"taxAmount\": \"-0.12\",

\"businessTaxCode\": \"0000000000\",

\"taxType\": \"1\"

}

}

## 6、响应参数

  ------------------ ---------- --------------------------- ---------------
  **名称**           **类型**   **示例值**                  **描述**

  status             String     0000                        状态编号

  message            String     同步成功                    描述信息
  ------------------ ---------- --------------------------- ---------------

## 7、响应示例

{

\"status\":\"0000\",

\"message\":\"同步成功\"

}

## 8、异常说明

  ------------ --------------------- ----------------------------------------
  **异常码**   **异常描述**          **解决方案**

  9999         请求失败              检查接口地址是否正确

                                     

                                     
  ------------ --------------------- ----------------------------------------

# 五、回传红字信息表申请结果接口

## 1、接口描述

+-------------+--------------------------------------------------------+
| 回传红      |                                                        |
| 字信息表申  |                                                        |
| 请结果接口  |                                                        |
+-------------+--------------------------------------------------------+
| 描述        | 1、红字信息表申请成功后，可根据该接口定义的形          |
|             | 式接收红字信息表数据，内容包括（申请编号、信息表编号、 |
|             | 销方税号、信息表编号、信息表状态、信息表商品明细等）。 |
|             |                                                        |
|             | 2、申请红字信息表接口中 callBackUrl                    |
|             | 字段有值时才返回，与企业资质中的开票结果回调地址无关   |
+-------------+--------------------------------------------------------+
| 版本号      | V1.0.0                                                 |
+-------------+--------------------------------------------------------+

## 2、请求地址

  ---------- ------------------------------------------------------------
  **环境**   **请求地址**

  生产环境   http://\[IP\]:\[PORT\]/invoice/scan

  沙箱坏境   http://\[IP\]:\[PORT\]/invoice/scan
  ---------- ------------------------------------------------------------

## 3、请求方式

  ----------------------------------- -----------------------------------
  请求方式                            同步 HTTP POST

  请求参数格式                        JSON

  请求数据编码                        UTF-8

  备注                                
  ----------------------------------- -----------------------------------

## 4、请求参数

+--------------+------+-----+--------------------+--------------+----+
| **名称**     | **类 | *   | **示例值**         | **描述**     | ** |
|              | 型** | *是 |                    |              | 最 |
|              |      | 否  |                    |              | 大 |
|              |      | **  |                    |              | ** |
|              |      |     |                    |              |    |
|              |      | *   |                    |              | ** |
|              |      | *必 |                    |              | 长 |
|              |      | 填  |                    |              | 度 |
|              |      | **  |                    |              | ** |
+--------------+------+-----+--------------------+--------------+----+
| operater     | St   | Y   | redConfirmCallback | 必填参数     |    |
|              | ring |     |                    | 。接口标识： |    |
+--------------+------+-----+--------------------+--------------+----+
| billId       | St   | Y   | 661565             | 红字         | 32 |
|              | ring |     | 671900190416131426 | 确认单申请号 |    |
+--------------+------+-----+--------------------+--------------+----+
| content      | St   | Y   |                    | 信息         |    |
|              | ring |     |                    | 表内容（Json |    |
|              |      |     |                    | 字符串格式） |    |
+--------------+------+-----+--------------------+--------------+----+
| **Content    |      |     |                    |              |    |
| 红字         |      |     |                    |              |    |
| 确认单信息** |      |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| billInfoNo   | St   | Y   | 1403011906000993   | 信息表编号   | 24 |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| billStatus   | St   | Y   | 1                  | 信息表状     | 1  |
|              | ring |     |                    | 态(0:申请中  |    |
|              |      |     |                    | 1:审核成功   |    |
|              |      |     |                    | 2:审核失败   |    |
|              |      |     |                    | 3:申请成功   |    |
|              |      |     |                    | 4:申请失败   |    |
|              |      |     |                    | 6:撤销中     |    |
|              |      |     |                    | 7:撤销失败   |    |
|              |      |     |                    | 8:已撤销)    |    |
+--------------+------+-----+--------------------+--------------+----+
| billMessage  | St   | Y   | \                  | \[信息表     |    |
|              | ring |     | [TZD0000\]审核通过 | 状态代码\]信 |    |
|              |      |     |                    | 息表状态描述 |    |
+--------------+------+-----+--------------------+--------------+----+
| billType     | St   | N   | 0                  | 信息表       | 1  |
|              | ring |     |                    | 类型(0:正常  |    |
|              |      |     |                    | 1:逾期       |    |
|              |      |     |                    | 2:           |    |
|              |      |     |                    | 机动车类专票 |    |
|              |      |     |                    | 信息表（涉及 |    |
|              |      |     |                    | 退货和开具错 |    |
|              |      |     |                    | 误等，合格证 |    |
|              |      |     |                    | 退回）3:机动 |    |
|              |      |     |                    | 车类专票信息 |    |
|              |      |     |                    | 表（仅涉及销 |    |
|              |      |     |                    | 售折让，合格 |    |
|              |      |     |                    | 证不退回）)  |    |
+--------------+------+-----+--------------------+--------------+----+
| or           | St   | N   | 5000181530         | 对应蓝票代码 | 12 |
| iInvoiceCode | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| oriI         | St   | N   | 73347544           | 对应蓝票号码 | 8  |
| nvoiceNumber | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| taxType      | St   | N   | 1                  | 税种类       | 1  |
|              | ring |     |                    | 别(0:营业税  |    |
|              |      |     |                    | 1:增值税)    |    |
+--------------+------+-----+--------------------+--------------+----+
| multTaxRate  | St   | N   | 0                  | 多税率标志(  | 1  |
|              | ring |     |                    | 0:一票一税率 |    |
|              |      |     |                    | 1            |    |
|              |      |     |                    | :一票多税率) |    |
+--------------+------+-----+--------------------+--------------+----+
| billTime     | St   | N   | 2020-03-26         | 填开日期     |    |
|              | ring |     | 18:44:08           |              |    |
+--------------+------+-----+--------------------+--------------+----+
| sellerTaxNo  | St   | N   | 150301199811285326 | 销方税号     | 20 |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| sellerName   | St   | N   | 测试税号326        | 销方名称     | 1  |
|              | ring |     |                    |              | 00 |
+--------------+------+-----+--------------------+--------------+----+
| buyerTaxNo   | St   | N   | 150301199811285326 | 购方税号     | 20 |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| buyerName    | St   | N   | 测试税号326        | 购方名称     | 1  |
|              | ring |     |                    |              | 00 |
+--------------+------+-----+--------------------+--------------+----+
| taxEx        | St   | N   | -0.94              | 合计         |    |
| cludedAmount | ring |     |                    | 金额(不含税) |    |
+--------------+------+-----+--------------------+--------------+----+
| taxAmount    | St   | N   | -0.06              | 合计税额     |    |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| applyRemark  | St   | N   | 0000000100         | 申请说       | 10 |
|              | ring |     |                    | 明（1100000  |    |
|              |      |     |                    | 000,购方申请 |    |
|              |      |     |                    | -已抵扣;101  |    |
|              |      |     |                    | 0000000,购方 |    |
|              |      |     |                    | 申请-未抵扣; |    |
|              |      |     |                    | 000000010    |    |
|              |      |     |                    | 0,销方申请） |    |
+--------------+------+-----+--------------------+--------------+----+
| pdfUrl       | St   | N   |                    | 申           | 2  |
|              | ring |     |                    | 请表pdf地址  | 55 |
+--------------+------+-----+--------------------+--------------+----+
| codeVersion  | St   | N   | 32                 | 商           |    |
|              | ring |     |                    | 品编码版本号 |    |
+--------------+------+-----+--------------------+--------------+----+
| bus          | St   | N   | 0000000000         | 营业税标志   | 10 |
| inessTaxCode | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| details      | List | N   |                    | 红字信息表   |    |
|              |      |     |                    | 明细信息列表 |    |
+--------------+------+-----+--------------------+--------------+----+
| **details    |      |     |                    |              |    |
| 红字确认单明 |      |     |                    |              |    |
| 细信息列表** |      |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| goodsName    | St   | N   | 苹果               | 商品名称     | 90 |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| unit         | St   | N   | 袋                 | 单位         | 22 |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| specType     | St   | N   | 规格型号           | 规格型号     | 40 |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| num          | St   | N   | -1                 | 数量         | 16 |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| taxE         | St   | N   | 0.94               | 单价(不含税) | 16 |
| xcludedPrice | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| taxEx        | St   | N   | -0.94              | 商品         |    |
| cludedAmount | ring |     |                    | 金额(不含税) |    |
+--------------+------+-----+--------------------+--------------+----+
| taxAmount    | St   | N   | -0.06              | 商品税额     |    |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| taxRate      | St   | N   | 0.06               | 税率，注：蓝 | 10 |
|              | ring |     |                    | 票发票为清单 |    |
|              |      |     |                    | 红票时值有可 |    |
|              |      |     |                    | 能会为null。 |    |
+--------------+------+-----+--------------------+--------------+----+
| goodsCode    | St   | N   | 4                  | 商品编码     | 19 |
|              | ring |     | 020000000000000000 |              |    |
+--------------+------+-----+--------------------+--------------+----+
| selfCode     | St   | N   |                    | 企业自编码   | 16 |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+
| favour       | St   | N   | 0                  | 优惠政策标识 | 1  |
| edPolicyFlag | ring |     |                    | (0:不使用    |    |
|              |      |     |                    | 1:使用)      |    |
+--------------+------+-----+--------------------+--------------+----+
| favour       | St   | N   |                    | 优惠         | 50 |
| edPolicyName | ring |     |                    | 政策内容:即  |    |
|              |      |     |                    | 征即退、免税 |    |
|              |      |     |                    | 、简易征收等 |    |
+--------------+------+-----+--------------------+--------------+----+
| zeroRateFlag | St   | N   |                    | 零税率标识   | 1  |
|              | ring |     |                    | (空:非零税率 |    |
|              |      |     |                    | 1:免税       |    |
|              |      |     |                    | 2:不征税     |    |
|              |      |     |                    | 3            |    |
|              |      |     |                    | :普通零税率) |    |
+--------------+------+-----+--------------------+--------------+----+
| goodsCodeAbb | St   | N   | 水果               | 商品编码简称 |    |
|              | ring |     |                    |              |    |
+--------------+------+-----+--------------------+--------------+----+

## 5、请求示例

## 6、响应参数

  ------------------ ---------- --------------------------- ---------------
  **名称**           **类型**   **示例值**                  **描述**

  status             String     0000                        状态编号

  message            String     同步成功                    描述信息
  ------------------ ---------- --------------------------- ---------------

## 7、响应示例

{

\"status\":\"0000\",

\"message\":\"同步成功\"

}

## 8、异常说明

  ------------ --------------------- ----------------------------------------
  **异常码**   **异常描述**          **解决方案**

  9999         请求失败              检查接口地址是否正确

                                     

                                     
  ------------ --------------------- ----------------------------------------

注：回调自动重试相关：

1.  当回调后第三方未返回接收成功（网路等异常，没有明确返回失败原因或成功）时，
    增加自动重试回调机制（增加回调次数 最多3次，每次间隔1分钟）

2.  范围：开票结果回调（成功/失败时）、作废回调、红字信息表申请结果回调（成功/失败时）

3.  前提：当企业配置可以进行
    开票结果回调、作废回调、红字信息表申请结果回调、红字确认单相关回调
    时